<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Success Stories</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container col-md-9">
    <a name="success-story"></a>
    <h1 class="mission-title py-5 text-center">SUCCESS STORIES</h1>
    
    <!-- Main Featured Story -->
    <div class="d-flex justify-content-center align-items-center mb-5">
      <div class="col-md-4">
        <img loading="lazy" id="mainImage" src="images/gallery/sakshi.jpeg" alt="Student" class="story-img" />
      </div>
      <div class="mx-2 stuimg_detels">
        <div class="feature-story">FEATURE STORY</div>
        <div id="studentName" class="studentName">Sakshi Singh</div>
        <p id="studentCompany" class="text-muted">
          Simplyfy Technocraft Pvt. Ltd, Delhi
        </p>
        <a id="studentLinkedin" href="https://www.linkedin.com/in/sakshi-singh-14499231a/" target="_blank">
          <img loading="lazy" src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn" class="linkedin-icon" />
        </a>
      </div>
    </div>

    <!-- Thumbnail Carousel -->
    <div class="d-flex justify-content-center align-items-center thumbnail-box">
      <span id="prevBtn"> </span>
      <div class="d-flex overflow-auto mx-3 py-5 col-md-10" id="thumbnails">
        <!-- Thumbnails will be generated here -->
      </div>
      <span id="nextBtn"> </span>
    </div>
  </div>

  <!-- Modal Structure -->
  <div id="imageModal" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalStudentName">Student Name</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <img id="modalImage" src="" alt="Student Image" class="img-fluid">
          <p id="modalStudentCompany" class="text-muted mt-3">Company Name</p>
          <a id="modalStudentLinkedin" href="#" target="_blank">
            <img src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn" class="linkedin-icon">
          </a>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script>
    let students = [];
    let startIndex = 0;

    // Fetch student data
    const fetchStudentData = async () => {
      try {
        const response = await fetch("students.json");
        students = await response.json();
        students.reverse(); // Reverse the array here
        initializeCarousel();
        updateMainStory(students[0]);
      } catch (error) {
        console.error("Error fetching student data:", error);
      }
    };

    // Update the main featured story
    const updateMainStory = (student) => {
      document.getElementById("mainImage").src = student.galleryImage;
      document.getElementById("studentName").textContent = student.name;
      document.getElementById("studentCompany").textContent = student.company;
      document.getElementById("studentLinkedin").href = student.linkedin;
    };

    // Initialize the carousel
    const initializeCarousel = () => {
      const thumbnails = document.getElementById("thumbnails");
      thumbnails.innerHTML = "";
      const slice = students.slice(startIndex, startIndex + 7);

      slice.forEach((student) => {
        const thumbnail = document.createElement("img");
        thumbnail.src = student.image;
        thumbnail.alt = student.name;
        thumbnail.classList.add("thumbnail-img", "me-2");
        thumbnail.addEventListener("click", () => openModal(student));
        thumbnails.appendChild(thumbnail);
      });
    };

    // Open modal with student data
    const openModal = (student) => {
      document.getElementById("modalImage").src = student.galleryImage;
      document.getElementById("modalStudentName").textContent = student.name;
      document.getElementById("modalStudentCompany").textContent = student.company;
      document.getElementById("modalStudentLinkedin").href = student.linkedin;

      const modal = new bootstrap.Modal(document.getElementById("imageModal"));
      modal.show();
    };

    // Show previous students in the carousel
    const showPrevious = () => {
      if (startIndex > 0) {
        startIndex--;
        initializeCarousel();
      }
    };

    // Show next students in the carousel
    const showNext = () => {
      if (startIndex + 7 < students.length) {
        startIndex++;
        initializeCarousel();
      }
    };

    // Event listeners for next and previous buttons
    document.getElementById("prevBtn").addEventListener("click", showPrevious);
    document.getElementById("nextBtn").addEventListener("click", showNext);

    // Fetch data and initialize on page load
    window.onload = () => {
      fetchStudentData();
    };
  </script>
</body>
</html>
